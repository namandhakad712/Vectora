<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Vectora â€” Fact Check</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='home.css') }}" />
    <style>
      /* Panel that matches the Figma centered rounded card */
      .check-panel-wrap { display:flex; align-items:center; justify-content:center; min-height:70vh; }
      .check-panel {
        width:640px; max-width:88vw; background: rgba(173,206,238,0.95); border-radius:18px; padding:28px 34px; box-shadow: 0 8px 30px rgba(0,0,0,0.08);
        border: 3px solid rgba(30,100,200,0.35); backdrop-filter: blur(2px);
        position:relative;
        display:flex;
        flex-direction:column;
        align-items:center;
      }
      .check-header { width:100%; position:relative; display:flex; align-items:center; justify-content:center; padding-top:6px; }
      .check-title { text-align:center; font-family:'Playfair Display', serif; letter-spacing:.35em; color:#163; margin:12px 0 6px }
      .check-sub { text-align:center; margin-bottom:12px; color:#112; max-width:86%; margin-left:auto; margin-right:auto }
  .input-area { background: linear-gradient(180deg, rgba(255,255,255,0.6), rgba(230,230,245,0.6)); padding:18px; border-radius:12px; border:1px solid rgba(0,0,0,0.06); box-shadow: inset 0 6px 20px rgba(0,0,0,0.04); display:block; width:90%; margin:0 auto }
  textarea#user_input { width:100%; min-height:200px; border-radius:12px; padding:18px; border:1px solid rgba(0,0,0,0.06); font-family: 'Montserrat', Arial, sans-serif; font-size:16px; resize:vertical; background: rgba(220,225,235,0.55); box-sizing:border-box }
  .result-row { margin-top:18px; display:flex; flex-direction:column; gap:12px; width:90%; margin-left:auto; margin-right:auto }
  .result-pill { min-height:56px; border-radius:14px; background: rgba(120,160,200,0.25); padding:14px 16px; display:block; color:#062; white-space:pre-wrap; word-wrap:break-word }
    .btn-row { display:flex; justify-content:flex-end; gap:12px; margin-top:10px }
    /* lang-badge styling is defined in the external stylesheet (home.css) to avoid inline overrides */
      @media(max-width:700px){ .check-panel{ width:92vw; padding:18px } }
    </style>
  </head>
  <body class="check-page">
    <div class="outer-rounded">
      <div class="circle-bg"></div>
      <header class="main-header">
        <nav class="navbar">
          <div class="navbar-logo">
            <img src="{{ url_for('static', filename='sigma.svg') }}" alt="Sigma Logo" class="sigma-img-navbar" />
          </div>
          <ul class="navbar-links">
            <li><a href="/" class="active">Home</a></li>
            <li><a href="/about">About</a></li>
            <li><a href="/contact">Contact</a></li>
            <li><a href="/patent" class="patent-link"><em>Patent</em></a></li>
          </ul>
          <div class="navbar-actions">
            <button class="login-btn">Login</button>
            <button id="top-lang-btn" class="lang-btn">Hindi / English</button>
          </div>
        </nav>
      </header>

      <main class="check-panel-wrap">
        <div class="check-panel">
          <div style="position:relative">
            <button type="button" class="lang-badge lang-btn" id="check-lang-badge" data-i18n="langBtn">Hindi / English</button>
            <div class="check-title" data-i18n="check_title">Vectora Is a Web based Platform</div>
            <div class="check-sub" data-i18n="check_sub">Enter text, paste a link, or upload an image to check facts. Vectora returns an authenticity percentage and reasoning.</div>
          </div>

          <div class="input-area">
            <form id="check-form">
              <textarea id="user_input" name="user_input" data-i18n="placeholder" autocomplete="off"></textarea>
              <input type="hidden" id="lang" name="lang" value="en" />
              <div class="btn-row">
                <button id="submit-btn" type="submit" class="use-vectora-btn" data-i18n="checkBtn">Check</button>
                <button id="clear-btn" type="button" class="use-vectora-btn" data-i18n="clear">Clear</button>
              </div>
            </form>
          </div>

          <div class="result-row">
            <div class="small" data-i18n="result_label">Result:</div>
            <div id="result" class="result-pill" data-i18n="awaiting">Awaiting input...</div>
          </div>
        </div>
      </main>

      <footer class="main-footer">
        <p>Made for Rural India | 2025 &mdash; Powered by Vectora</p>
      </footer>
    </div>

    <script src="{{ url_for('static', filename='script.js') }}"></script>
    <script>
      (function(){
        const form = document.getElementById('check-form');
        const result = document.getElementById('result');
        const clear = document.getElementById('clear-btn');

        clear.addEventListener('click', ()=>{
          document.getElementById('user_input').value = '';
          result.textContent = (window.t ? t('awaiting') : 'Awaiting input...');
        });

        form.addEventListener('submit', async (e)=>{
          e.preventDefault();
          const input = document.getElementById('user_input').value.trim();
          const lang = document.getElementById('lang') ? document.getElementById('lang').value : 'en';
          if(!input){ result.textContent = (window.t ? t('please_enter') : 'Please enter text or paste a link.'); return }
          result.textContent = (window.t ? t('checking') : 'Checking...');
          try{
            const data = new FormData();
            data.append('user_input', input);
            data.append('lang', lang);
            const resp = await fetch('/process', { method: 'POST', body: data });
            if(!resp.ok){
              const txt = await resp.text();
              result.textContent = (window.t ? t('error_prefix') : 'Error:') + ' ' + txt;
              return;
            }
            const json = await resp.json();
            result.textContent = json.reply || JSON.stringify(json, null, 2);
          }catch(err){ result.textContent = (window.t ? t('network_error') : 'Network error') + ': ' + String(err) }
        });
      })();
    </script>
  </body>
</html>
